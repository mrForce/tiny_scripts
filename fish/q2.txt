An extra byte for the null terminating character '\0' must be included. (It should be malloc(len+1).) Some extra code was added in an else statement on the print statement. This should not have been added as it breaks the code. Finally, the 'copy' string must be free'd after 'ptr' is free'd.
